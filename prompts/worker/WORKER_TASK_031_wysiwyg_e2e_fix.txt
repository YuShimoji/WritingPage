# Worker Prompt: TASK_031_wysiwyg_e2e_fix

## 参照
- チケット: docs/tasks/TASK_031_wysiwyg_e2e_fix.md
- SSOT: .shared-workflows/docs/Windsurf_AI_Collab_Rules_latest.md
- HANDOVER: docs/HANDOVER.md
- MISSION_LOG: .cursor/MISSION_LOG.md

## 境界
- Focus Area: 
  - `js/editor-wysiwyg.js`（WYSIWYG エディタ実装）
  - `e2e/wysiwyg-editor.spec.js`（E2E テスト）
  - `index.html`（WYSIWYG UI 要素）
  - `css/style.css`（必要に応じて）
- Forbidden Area: 
  - `.shared-workflows/**`（submodule内の変更は禁止）
  - 既存の成功テスト（5/9）を失敗させる変更

## 前提
- Tier: 1
- Branch: main
- Report Target: docs/inbox/REPORT_TASK_031_wysiwyg_e2e_fix_YYYYMMDD_HHMM.md
- GitHubAutoApprove: docs/HANDOVER.md の記述を参照（未記載なら push 禁止）

## DoD
- [ ] 失敗している4つの E2E テスト（Bold, Italic, Underline, Link）がすべて成功する
- [ ] 既存の成功テスト（5つ）が引き続き成功する
- [ ] 実装変更の場合、意図しない副作用がないことを確認
- [ ] docs/inbox/ にレポート（REPORT_...md）が作成されている
- [ ] 本チケットの Report 欄にレポートパスが追記されている

## 背景情報
- `js/editor-wysiwyg.js` に RichTextEditor クラスは実装済み
- E2E テスト結果: 5/9 成功、4/9 失敗（Bold, Italic, Underline, Link）
- 既存の Worker レポート（REPORT_WYSIWYG_E2E_FIX.md）によると、`document.execCommand` の問題で4つのテストが失敗している
- 失敗の原因は、Playwright 環境での `document.execCommand` の動作が期待通りでない可能性がある

## 停止条件
- Forbidden Area に触れないと完遂できない
- 仕様の仮定が 3 つ以上必要
- 既存の成功テストが失敗するような変更が必要

## 納品先
- docs/inbox/REPORT_TASK_031_wysiwyg_e2e_fix_YYYYMMDD_HHMM.md

## 注意事項
- レポートには必須ヘッダー（'概要'、'現状'、'次のアクション'）を含めること
- `document.execCommand` は非推奨APIのため、代替実装（例: 手動でHTMLタグを挿入）を検討することも可能
- テストの待機条件やセレクタを改善することで解決できる可能性もある
