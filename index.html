<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Writer - 小説執筆ツール</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- サイドバー -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>設定</h2>
                <button id="close-sidebar" class="icon-button">×</button>
            </div>

            <div class="sidebar-section">
                <h3>賞/メタ情報</h3>
                <label for="award-effect">表示効果</label>
                <select id="award-effect">
                    <option value="accordion">アコーディオン</option>
                    <option value="floating">フローティング</option>
                </select>
                <div class="award-editor">
                    <input type="text" id="award-title" placeholder="賞名（例: 〇〇文学賞）">
                    <input type="text" id="award-year" placeholder="年（例: 2025）">
                    <button id="add-award">追加</button>
                </div>
                <div id="award-list" class="award-list"></div>
            </div>
            
            <div class="sidebar-section">
                <details id="theme-section">
                    <summary>テーマ</summary>
                    <div class="theme-presets" style="margin-top:8px;">
                        <button class="theme-preset" data-theme="light">ライト</button>
                        <button class="theme-preset" data-theme="dark">ダーク</button>
                        <button class="theme-preset" data-theme="sepia">セピア</button>
                    </div>

                    <div class="sidebar-section">
                        <h3>テーマプリセット（拡張）</h3>
                        <label for="theme-bundle-select">プリセット</label>
                        <select id="theme-bundle-select"></select>
                        <div class="bundle-controls">
                            <input type="text" id="theme-bundle-name" placeholder="現在の設定を保存（名前）">
                            <button id="save-theme-bundle">保存</button>
                            <button id="apply-theme-bundle">適用</button>
                            <button id="delete-theme-bundle">削除</button>
                        </div>
                    </div>
                    
                    <div class="color-picker">
                        <label for="bg-color">背景色</label>
                        <input type="color" id="bg-color" value="#ffffff">
                        
                        <label for="text-color">文字色</label>
                        <input type="color" id="text-color" value="#333333">
                        <button id="reset-colors" class="button" style="margin-top:0.5rem;">カスタム色リセット</button>
                    </div>
                </details>
            </div>
            
            <div class="sidebar-section">
                <h3>フォント</h3>
                <select id="font-family">
                    <option value="'Noto Serif JP', serif">Noto Serif JP</option>
                    <option value="'Yu Mincho', 'YuMincho', serif">游明朝</option>
                    <option value="'Hiragino Mincho ProN', serif">ヒラギノ明朝</option>
                </select>
                
                <label for="font-size">フォントサイズ: <span id="font-size-value">16</span>px</label>
                <input type="range" id="font-size" min="12" max="32" value="16">
                
                <label for="line-height">行間: <span id="line-height-value">1.6</span></label>
                <input type="range" id="line-height" min="1" max="3" step="0.1" value="1.6">
            </div>
            
            <div class="sidebar-section">
                <h3>アウトライン</h3>
                <label for="outline-set">プリセット</label>
                <select id="outline-set"></select>
                <div class="outline-controls">
                    <details>
                        <summary>新しいプリセットを作成</summary>
                        <label for="outline-new-name">名前</label>
                        <input type="text" id="outline-new-name" placeholder="例: 三部構成">
                        <label for="outline-new-levels">レベル（カンマ区切り）</label>
                        <input type="text" id="outline-new-levels" placeholder="部,章,節">
                        <button id="create-outline-set">作成</button>
                    </details>
                </div>
                <div id="outline-levels-container" class="outline-levels"></div>
                <div id="outline-insert-buttons" class="outline-insert"></div>
            </div>

            <div class="sidebar-section">
                <h3>ドキュメント</h3>
                <button id="new-document">新規ドキュメント</button>
                <button id="import-file">ファイルを読み込む</button>
                <input type="file" id="file-input" accept=".txt,.md,.markdown,.text" style="display:none" />
                <button id="export-txt">テキストで保存</button>
                <button id="export-md">Markdownで保存</button>
            </div>
        </aside>
        
        <!-- メインコンテンツ -->
        <main class="main-content">
            <!-- 賞/メタ情報の表示領域 -->
            <div id="awards-display" class="awards-display"></div>
            <!-- ツールバー -->
            <div class="toolbar">
                <button id="toggle-sidebar" class="icon-button">☰</button>
                <div class="word-count">0 文字</div>
                <div class="toolbar-actions">
                    <button id="toggle-toolbar" class="icon-button">⌨️</button>
                    <button id="fullscreen" class="icon-button">⛶</button>
                </div>
            </div>
            
            <!-- エディタエリア -->
            <div class="editor-container">
                <textarea id="editor" placeholder="ここに小説を入力してください..."></textarea>
            </div>
        </main>
    </div>
    <!-- ツールバー再表示用FAB -->
    <button id="show-toolbar" class="fab-toggle-toolbar" title="ツールバーを表示" style="display:none;">⌨️</button>
    <!-- 追加機能用FAB -->
    <button id="fab-tools" class="fab-tools" title="ツール">⚙️</button>
    <!-- フローティングフォントパネル -->
    <div id="floating-font-panel" class="floating-panel" style="display:none;">
        <div class="panel-header">
            <span>フォントサイズ</span>
            <button class="panel-close" id="close-font-panel">×</button>
        </div>
        <div class="panel-body">
            <input type="range" id="global-font-size" min="12" max="48" value="16">
            <div class="panel-row">
                <input type="number" id="global-font-size-number" min="12" max="48" value="16" style="width:72px;"> px
            </div>
            <div class="panel-hint">ショートカット: Ctrl/⌘ + (+ / - / 0)</div>
        </div>
    </div>
    
    <script src="js/storage.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/hud.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/outline.js"></script>
    <script src="js/themes-advanced.js"></script>
    <script src="js/awards.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
