<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zen Writer - å°èª¬åŸ·ç­†ãƒ„ãƒ¼ãƒ«</title>
    <script>
      (function () {
        // åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ¼ãƒ‰åˆ¤å®šï¼ˆ?embed=1ï¼‰
        var isEmbed = /(?:^|[?&])embed=1(?:&|$)/.test(location.search);
        if (isEmbed) {
          document.documentElement.setAttribute('data-embed', 'true');
        }
        try {
          var raw = localStorage.getItem('zenWriter_settings');
          if (raw) {
            var s = JSON.parse(raw);
            if (s && s.toolbarVisible === false) {
              document.documentElement.setAttribute(
                'data-toolbar-hidden',
                'true',
              );
            }
          } else {
            // è¨­å®šãŒæœªä½œæˆï¼ˆåˆå›èµ·å‹•ï¼‰ã¯éè¡¨ç¤ºã«ã™ã‚‹
            document.documentElement.setAttribute(
              'data-toolbar-hidden',
              'true',
            );
          }
        } catch (e) {
          /* ignore */
        }
        // åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’å¼·åˆ¶çš„ã«éš ã™ï¼ˆæœ€å°UIï¼‰
        if (isEmbed) {
          document.documentElement.setAttribute('data-toolbar-hidden', 'true');
        }
      })();
    </script>
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="stylesheet" href="css/style.css" />
    <script>
      // éåŸ‹ã‚è¾¼ã¿æ™‚ã®ã¿ Google Fonts ã‚’å‹•çš„ã«èª­ã¿è¾¼ã‚€ï¼ˆpreconnect æœ€é©åŒ–è¾¼ã¿ï¼‰
      (function () {
        try {
          var isEmbed = /(?:^|[?&])embed=1(?:&|$)/.test(location.search);
          if (isEmbed) return;
          var head = document.getElementsByTagName('head')[0];
          var l1 = document.createElement('link');
          l1.rel = 'preconnect';
          l1.href = 'https://fonts.googleapis.com';
          var l2 = document.createElement('link');
          l2.rel = 'preconnect';
          l2.href = 'https://fonts.gstatic.com';
          l2.crossOrigin = '';
          var css = document.createElement('link');
          css.rel = 'stylesheet';
          css.href =
            'https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap';
          head.appendChild(l1);
          head.appendChild(l2);
          head.appendChild(css);
        } catch (_) {}
      })();
    </script>
  </head>
  <body>
    <div class="app-container">
      <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h2>è¨­å®š</h2>
          <button id="close-sidebar" class="icon-button">Ã—</button>
        </div>

        <div class="sidebar-top">
          <div class="sidebar-tabs" role="tablist" aria-label="è¨­å®šã‚«ãƒ†ã‚´ãƒª">
            <button
              class="sidebar-tab active"
              type="button"
              id="sidebar-tab-structure"
              data-group="structure"
              aria-controls="sidebar-group-structure"
              aria-selected="true"
            >
              æ§‹é€ 
            </button>
            <button
              class="sidebar-tab"
              type="button"
              id="sidebar-tab-typography"
              data-group="typography"
              aria-controls="sidebar-group-typography"
              aria-selected="false"
            >
              ã‚¿ã‚¤ãƒ
            </button>
            <button
              class="sidebar-tab"
              type="button"
              id="sidebar-tab-assist"
              data-group="assist"
              aria-controls="sidebar-group-assist"
              aria-selected="false"
            >
              ã‚¢ã‚·ã‚¹ãƒˆ
            </button>
          </div>
          <div class="sidebar-loadout">
            <label for="loadout-select">ãƒ­ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ</label>
            <div class="loadout-controls">
              <select
                id="loadout-select"
                aria-label="ãƒ­ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã‚’é¸æŠ"
              ></select>
              <input
                type="text"
                id="loadout-name"
                placeholder="ãƒ—ãƒªã‚»ãƒƒãƒˆå"
                aria-label="ãƒ­ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆå"
              />
              <div class="loadout-buttons">
                <button id="loadout-save" class="small" type="button">
                  ä¿å­˜
                </button>
                <button id="loadout-duplicate" class="small" type="button">
                  è¤‡è£½
                </button>
                <button id="loadout-apply" class="small" type="button">
                  é©ç”¨
                </button>
                <button id="loadout-delete" class="small" type="button">
                  å‰Šé™¤
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="sidebar-groups">
          <section
            class="sidebar-group active"
            data-group="structure"
            id="sidebar-group-structure"
            role="tabpanel"
            aria-labelledby="sidebar-tab-structure"
          >
            <div class="sidebar-section">
              <div
                id="structure-gadgets-panel"
                class="gadgets-panel"
                data-gadget-group="structure"
                aria-label="æ§‹é€ ã‚¬ã‚¸ã‚§ãƒƒãƒˆ"
              ></div>
            </div>
          </section>

          <section
            class="sidebar-group"
            data-group="typography"
            id="sidebar-group-typography"
            role="tabpanel"
            aria-labelledby="sidebar-tab-typography"
            aria-hidden="true"
          >
            <div class="sidebar-section">
              <div
                id="typography-gadgets-panel"
                class="gadgets-panel"
                data-gadget-group="typography"
                aria-label="ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£ã‚¬ã‚¸ã‚§ãƒƒãƒˆ"
              ></div>
            </div>
          </section>

          <section
            class="sidebar-group"
            data-group="assist"
            id="sidebar-group-assist"
            role="tabpanel"
            aria-labelledby="sidebar-tab-assist"
            aria-hidden="true"
          >
            <div class="sidebar-section">
              <div
                id="plugins-panel"
                class="plugins-panel"
                aria-label="ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ“ä½œ"
              ></div>
            </div>

            <div class="sidebar-section">
              <div
                id="gadgets-panel"
                class="gadgets-panel"
                aria-label="ã‚¬ã‚¸ã‚§ãƒƒãƒˆ"
              ></div>
              <div
                class="gadget-tools"
                style="
                  margin-top: 8px;
                  display: flex;
                  flex-wrap: wrap;
                  gap: 6px;
                "
              >
                <button id="gadget-export" class="small" type="button">
                  ã‚¬ã‚¸ã‚§ãƒƒãƒˆè¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                </button>
                <button id="gadget-import" class="small" type="button">
                  ã‚¬ã‚¸ã‚§ãƒƒãƒˆè¨­å®šã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                </button>
                <input
                  id="gadget-prefs-input"
                  type="file"
                  accept="application/json,.json"
                  style="display: none"
                />
              </div>
            </div>
          </section>
        </div>
        <div class="sidebar-section">
          <h3>ãƒ˜ãƒ«ãƒ—</h3>
          <a
            class="button"
            href="docs/editor-help.html"
            target="_blank"
            rel="noopener"
            >ã‚¨ãƒ‡ã‚£ã‚¿æ©Ÿèƒ½ã‚¬ã‚¤ãƒ‰ã‚’é–‹ã</a
          >
        </div>
      </aside>

      <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
      <main class="main-content">
        <!-- ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ -->
        <div class="toolbar">
          <button
            id="toggle-sidebar"
            class="icon-button"
            aria-label="ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’é–‹é–‰"
          >
            â˜°
          </button>
          <div class="word-count">0 æ–‡å­—</div>
          <div
            id="goal-progress"
            class="goal-progress"
            aria-hidden="true"
            style="display: none"
          >
            <div class="goal-progress__track">
              <div class="goal-progress__bar" style="width: 0%"></div>
            </div>
          </div>
          <div class="toolbar-actions">
            <button
              id="toggle-text-animation"
              class="icon-button"
              title="ãƒ†ã‚­ã‚¹ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³"
              aria-label="ãƒ†ã‚­ã‚¹ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ãƒãƒ«ã‚’é–‹ã"
            >
              âœ¨
            </button>
            <button
              id="toggle-font-decoration"
              class="icon-button"
              title="ãƒ•ã‚©ãƒ³ãƒˆè£…é£¾"
              aria-label="ãƒ•ã‚©ãƒ³ãƒˆè£…é£¾ãƒ‘ãƒãƒ«ã‚’é–‹ã"
            >
              ğŸ–‹ï¸
            </button>
            <button
              id="toggle-toolbar"
              class="icon-button"
              aria-label="ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’é–‹é–‰"
            >
              âŒ¨ï¸
            </button>
            <button
              id="fullscreen"
              class="icon-button"
              aria-label="ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³åˆ‡æ›¿"
            >
              â›¶
            </button>
          </div>
        </div>

        <!-- ã‚¨ãƒ‡ã‚£ã‚¿ã‚¨ãƒªã‚¢ -->
        <div class="editor-container">
          <div class="editor-canvas">
            <textarea
              id="editor"
              placeholder="ã“ã“ã«å°èª¬ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."
            ></textarea>
            <div
              id="editor-overlay"
              class="editor-overlay"
              aria-hidden="true"
            ></div>
            <div
              id="editor-mirror"
              class="editor-mirror"
              aria-hidden="true"
            ></div>
          </div>
          <div
            id="editor-preview"
            class="editor-preview editor-preview--collapsed"
            aria-live="polite"
          >
            <div id="editor-preview-body" class="editor-preview__body"></div>
          </div>
          <div id="print-view" class="print-view" aria-hidden="true"></div>
        </div>
      </main>
    </div>
    <!-- ãƒ„ãƒ¼ãƒ«ãƒãƒ¼å†è¡¨ç¤ºç”¨FAB -->
    <button
      id="show-toolbar"
      class="fab-toggle-toolbar"
      title="ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’è¡¨ç¤º"
      aria-label="ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’è¡¨ç¤º"
      style="display: none"
    >
      âŒ¨ï¸
    </button>
    <!-- è¿½åŠ æ©Ÿèƒ½ç”¨FAB -->
    <button id="fab-tools" class="fab-tools" title="ãƒ„ãƒ¼ãƒ«" aria-label="ãƒ„ãƒ¼ãƒ«">
      âš™ï¸
    </button>
    <!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ã‚©ãƒ³ãƒˆãƒ‘ãƒãƒ« -->
    <div id="floating-font-panel" class="floating-panel" style="display: none">
      <div class="panel-header">
        <span>ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º</span>
        <button class="panel-close" id="close-font-panel">Ã—</button>
      </div>
      <div class="panel-body">
        <input
          type="range"
          id="global-font-size"
          min="12"
          max="48"
          value="16"
        />
        <div class="panel-row">
          <input
            type="number"
            id="global-font-size-number"
            min="12"
            max="48"
            value="16"
            style="width: 72px"
          />
          px
        </div>
        <div class="panel-hint">ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: Ctrl/âŒ˜ + (+ / - / 0)</div>
      </div>
    </div>
    <!-- æ¤œç´¢ç½®æ›ãƒ‘ãƒãƒ« -->
    <div id="search-panel" class="floating-panel" style="display: none">
      <div class="panel-header">
        <span>æ¤œç´¢ã¨ç½®æ›</span>
        <button class="panel-close" id="close-search-panel">Ã—</button>
      </div>
      <div class="panel-body">
        <input type="text" id="search-input" placeholder="æ¤œç´¢ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ" />
        <input type="text" id="replace-input" placeholder="ç½®æ›ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ" />
        <div class="panel-row">
          <label style="margin-right: 1rem"
            ><input type="checkbox" id="search-case-sensitive" />
            å¤§æ–‡å­—/å°æ–‡å­—ã‚’åŒºåˆ¥</label
          >
          <label><input type="checkbox" id="search-regex" /> æ­£è¦è¡¨ç¾</label>
        </div>
        <div class="panel-row">
          <button id="replace-single" class="small" type="button">ç½®æ›</button>
          <button id="replace-all" class="small" type="button">
            ã™ã¹ã¦ç½®æ›
          </button>
          <button id="search-prev" class="small" type="button">å‰ã¸</button>
          <button id="search-next" class="small" type="button">æ¬¡ã¸</button>
        </div>
        <div class="panel-hint">
          <span id="match-count">ä¸€è‡´ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</span><br />
          <small>ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: Ctrl+F ã§æ¤œç´¢ãƒ‘ãƒãƒ«ã‚’é–‹ã</small>
        </div>
      </div>
    </div>

    <!-- ãƒ•ã‚©ãƒ³ãƒˆè£…é£¾ãƒ‘ãƒãƒ« -->
    <div id="font-decoration-panel" class="floating-panel" style="display: none">
      <div class="panel-header">
        <span>ãƒ•ã‚©ãƒ³ãƒˆè£…é£¾</span>
        <button class="panel-close" id="close-font-decoration-panel">Ã—</button>
      </div>
      <div class="panel-body">
        <div class="panel-row">
          <button id="decor-bold" class="decor-btn" data-tag="bold" title="å¤ªå­— (Ctrl+B)">B</button>
          <button id="decor-italic" class="decor-btn" data-tag="italic" title="æ–œä½“ (Ctrl+I)">I</button>
          <button id="decor-underline" class="decor-btn" data-tag="underline" title="ä¸‹ç·š">U</button>
          <button id="decor-strike" class="decor-btn" data-tag="strike" title="å–ã‚Šæ¶ˆã—ç·š">S</button>
          <button id="decor-black" class="decor-btn" data-tag="black" title="æ¥µå¤ª">æ¥µ</button>
        </div>
        <div class="panel-row">
          <button id="decor-light" class="decor-btn" data-tag="light" title="ç´°å­—">ç´°</button>
          <button id="decor-smallcaps" class="decor-btn" data-tag="smallcaps" title="ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚­ãƒ£ãƒƒãƒ—">SC</button>
          <button id="decor-shadow" class="decor-btn" data-tag="shadow" title="å½±ä»˜ã">å½±</button>
          <button id="decor-outline" class="decor-btn" data-tag="outline" title="è¼ªéƒ­">è¼ª</button>
          <button id="decor-glow" class="decor-btn" data-tag="glow" title="ç™ºå…‰">å…‰</button>
        </div>
        <div class="panel-row">
          <button id="decor-uppercase" class="decor-btn" data-tag="uppercase" title="å¤§æ–‡å­—">å¤§</button>
          <button id="decor-lowercase" class="decor-btn" data-tag="lowercase" title="å°æ–‡å­—">å°</button>
          <button id="decor-capitalize" class="decor-btn" data-tag="capitalize" title="å…ˆé ­å¤§æ–‡å­—">é ­</button>
          <button id="decor-wide" class="decor-btn" data-tag="wide" title="æ–‡å­—é–“åºƒ">åºƒ</button>
          <button id="decor-narrow" class="decor-btn" data-tag="narrow" title="æ–‡å­—é–“ç‹­">ç‹­</button>
        </div>
        <div class="panel-hint">
          ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠã—ã¦ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã€ã¾ãŸã¯ã‚¿ã‚°ã‚’æ‰‹å‹•å…¥åŠ›<br>
          ä¾‹: [bold]ãƒ†ã‚­ã‚¹ãƒˆ[/bold]
        </div>
      </div>
    </div>

    <!-- ãƒ†ã‚­ã‚¹ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ‘ãƒãƒ« -->
    <div id="text-animation-panel" class="floating-panel" style="display: none">
      <div class="panel-header">
        <span>ãƒ†ã‚­ã‚¹ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</span>
        <button class="panel-close" id="close-text-animation-panel">Ã—</button>
      </div>
      <div class="panel-body">
        <div class="panel-row">
          <button id="anim-fade" class="decor-btn" data-tag="fade" title="ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³">ãƒ•ã‚§ãƒ¼ãƒ‰</button>
          <button id="anim-slide" class="decor-btn" data-tag="slide" title="ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³">ã‚¹ãƒ©ã‚¤ãƒ‰</button>
          <button id="anim-type" class="decor-btn" data-tag="type" title="ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿ãƒ¼">ã‚¿ã‚¤ãƒ—</button>
          <button id="anim-pulse" class="decor-btn" data-tag="pulse" title="ãƒ‘ãƒ«ã‚¹">ãƒ‘ãƒ«ã‚¹</button>
        </div>
        <div class="panel-row">
          <button id="anim-shake" class="decor-btn" data-tag="shake" title="ã‚·ã‚§ã‚¤ã‚¯">ã‚·ã‚§ã‚¤ã‚¯</button>
          <button id="anim-bounce" class="decor-btn" data-tag="bounce" title="ãƒã‚¦ãƒ³ã‚¹">ãƒã‚¦ãƒ³ã‚¹</button>
          <button id="anim-fadein" class="decor-btn" data-tag="fadein" title="ã‚†ã£ãã‚Šãƒ•ã‚§ãƒ¼ãƒ‰">é…ãƒ•ã‚§ãƒ¼ãƒ‰</button>
        </div>
        <div class="panel-hint">
          ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚°ã§ãƒ†ã‚­ã‚¹ãƒˆã«å‹•ãã‚’ä»˜ã‘ã‚‹<br>
          ä¾‹: [pulse]å¼·èª¿ãƒ†ã‚­ã‚¹ãƒˆ[/pulse]
        </div>
      </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/hud.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/app.js"></script>
    <!-- åŸ‹ã‚è¾¼ã¿æ™‚ã®postMessageãƒ–ãƒªãƒƒã‚¸ï¼ˆ?embed=1ã§READY/RPCå—ä¿¡ï¼‰ -->
    <script src="js/embed/child-bridge.js"></script>
    <script>
      // éåŸ‹ã‚è¾¼ã¿æ™‚ã®ã¿ Outline/é«˜åº¦ãƒ†ãƒ¼ãƒ/ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å‹•çš„ãƒ­ãƒ¼ãƒ‰ï¼ˆåŸ‹ã‚è¾¼ã¿ã§ã®åˆæœŸãƒ­ãƒ¼ãƒ‰ã‚’è»½é‡åŒ–ï¼‰
      (function () {
        var isEmbed = /(?:^|[?&])embed=1(?:&|$)/.test(location.search);
        if (isEmbed) return;
        function load(src) {
          var s = document.createElement('script');
          s.src = src;
          s.defer = true;
          document.body.appendChild(s);
        }
        load('js/themes-advanced.js');
        load('js/plugins/registry.js');
        load('js/plugins/choice.js');
        load('js/gadgets.js');
        load('js/images.js');
      })();
    </script>
  </body>
</html>
