<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zen Writer UI Lab - Panels & Gadgets</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <main class="main-layout" style="display: flex; min-height: 100vh;">
      <aside class="sidebar open" style="position: relative; flex: 0 0 280px;">
        <h2 style="margin-bottom: 0.5rem;">Sidebar Region</h2>
        <p style="font-size: 0.9rem; opacity: 0.8;">
          この領域は Panels Layout の <strong>SIDEBAR_LEFT</strong> ゾーンとして動作します。
          パネルをドラッグしてここにドロップするとドッキングされます。
        </p>
      </aside>
      <section class="main-content" style="flex: 1; padding: 1.5rem;">
        <h1>UI Panels Lab</h1>
        <p class="body-text">
          開発・検証用の UI レイアウト実験ページです。本番のエディタ画面とは独立しており、
          Region / Panel / GadgetContainer の挙動を安全に試すためのサンドボックスです。
        </p>
        <section style="margin-top: 1.5rem;">
          <h2>デモ: ドッカブルパネル</h2>
          <p style="font-size: 0.9rem; opacity: 0.8;">
            下のボタンでサンプルパネルを生成し、サイドバーや画面下部、フローティングに移動できます。
          </p>
          <button id="create-panels" class="small">サンプルパネルを生成</button>
        </section>
      </section>
    </main>

    <script src="../js/panels.js"></script>
    <script>
      (function(){
        if (!window.ZenWriterPanels) return;
        const Panels = window.ZenWriterPanels;
        const btn = document.getElementById('create-panels');
        if (!btn) return;

        let created = false;
        btn.addEventListener('click', function(){
          if (created) return; // 1回だけ生成
          created = true;

          const p1 = Panels.createDockablePanel(
            'lab-panel-outline',
            'Outline Panel (Sample)',
            '<p>ここにアウトラインガジェットなどを配置する想定です。</p>'
          );
          const p2 = Panels.createDockablePanel(
            'lab-panel-tools',
            'Tools Panel (Sample)',
            '<p>ここにはツールガジェットのコンテナを配置する想定です。</p>'
          );

          // 一旦 body に追加してからレイアウトAPIで再配置
          document.body.appendChild(p1);
          document.body.appendChild(p2);

          // p1 はサイドバー領域（SIDEBAR_LEFT）にドッキング
          Panels.dockPanelToZone('lab-panel-outline', Panels.ZONES.SIDEBAR_LEFT);
          // p2 はフローティングパネルとして扱う（FLOATING は内部的にフローティング扱い）
          Panels.dockPanelToZone('lab-panel-tools', Panels.ZONES.FLOATING);
        });
      })();
    </script>
  </body>
</html>
