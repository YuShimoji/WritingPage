# DESIGN — 設計方針

## 目的

- 集中して書ける Zen ライクな執筆体験
- サーバー不要で即利用可能
- 最小構成での拡張容易性

## アーキテクチャ

- `index.html`: レイアウトと要素の定義
- `css/style.css`: CSS変数（カスタムプロパティ）で配色/タイポグラフィを一元管理
- `js/storage.js`: LocalStorage の読み書きとテキストエクスポート
- `js/theme.js`: テーマ/配色/フォント適用（明度判定・色調整補助含む）
- `js/editor.js`: 入力、保存、カウンタ、通知、ショートカット
- `js/app.js`: UI イベント配線、初期化

## 設計原則

- SRP/SoC: 各ファイルは単一責務
- KISS/YAGNI: フレームワーク不使用、DOM API ベース
- DRY: CSS変数とユーティリティ関数で重複低減

## テーマ適用

- ルート要素に `data-theme` を付与（light/dark/sepia）
- カスタムカラーは `--bg-color`, `--text-color` を上書き
- 背景の明度からサイドバー/ツールバー/境界色を自動調整

## 永続化

- `settings` と `content` を LocalStorage に保存
- JSON 直列化により設定を保持

## 将来拡張の考慮

- 複数ドキュメント管理（LocalStorage にインデックスを保持）
- 印刷用スタイル、PDFエクスポート（ブラウザの印刷機能利用）
- 執筆目標/進捗、セクション/シーン管理

## UIデザイン指針（Zen Writer × ノートアプリ折衷）

- **目的**
  - 元々の Zen ライクな「白い紙の前に座る」感覚を維持しつつ、Quiver / Boost Note / Obsidian のような
    サイドバー型ノートアプリの情報整理力・ナビゲーション性を取り込む。

- **レイアウトの基本構造**
  - 3カラムを基調とした構成を想定する。
    - 左: ライブラリ / ドキュメントツリー / ガジェット群（現在のサイドバー Region）。
    - 中央: メインエディタ（常に「主役」として最も広い領域を確保）。
    - 右: コンテキストパネル（目次・アウトライン・リンクプレビュー・メタ情報など）。
  - 現行実装では「左サイドバー + 中央エディタ」を優先し、右パネルはガジェットやフローティングパネルで段階的に補っていく。

- **表示モードとの関係**
  - `通常モード`:
    - 左サイドバーとヘッダーを表示し、ノートアプリ的な情報整理ビューとして使う。
    - メインエディタ幅は 60〜80 文字程度の読みやすい行長を意識し、左右に十分な余白を取る。
  - `フォーカスモード` / `ブランクモード`:
    - サイドバーや補助パネルを隠し、「ほぼエディタだけ」の Zen ライクな状態に近づける。
    - ただし行長や行間は極端に変えず、Visual Profile を通じて緩やかな変化に留める。

- **Visual Profile との役割分担**
  - Visual Profile は「テーマ / フォント / 行間 / 余白バランス」をまとめた**見た目プリセット**として扱う。
    - 例: `ライト`, `ダーク`, `ライト（余白広め）`。
  - UIモード（通常/フォーカス/ブランク）は「どのパネルを見せるか」という**レイアウト構造**の切り替えに専念させ、
    Visual Profile からは原則分離する（レイアウトの急激なシフトを避ける）。

- **サイドバー / パネル設計の方針**
  - 現在の左サイドバーは、将来の Panel/Region モデルにおける `left` Region に相当する。
  - サイドバー内のガジェット（Typography, Outline, Loadouts 等）は、将来的に
    - 左固定サイドバー
    - 右サイドバー
    - フローティングパネル
    など **ユーザーが表示位置を選べるパネル**に載せ替え可能にすることを前提に実装する。
  - そのため、ガジェットのロジックは「どのパネルに表示されているか」に依存しない形で分離しておく。

- **ダーク系UIの方向性**
  - 参考アプリと同様に、
    - サイドバーやヘッダーはやや暗めのグレー背景（低コントラスト）
    - エディタ背景は一段明るいグレー〜ダークカラーで、本文が最も目立つようにする。
  - 強調色（リンク・選択中アイテムなど）は少数のアクセントカラーに絞り、
    Visual Profile を通じて統一感を保つ。

- **非ゴール（本指針だけでは扱わないもの）**
  - 完全なパネルドッキングUI（自由なドラッグ&ドロップによる配置）は別フェーズ（Panel/Layout capability）で扱う。
  - 外部エディタ級の高度なタブ管理やマルチウィンドウは対象外とし、
    まずはシングルウィンドウ内の Region/Panel/Gadget の整理を優先する。
