# USAGE — 使い方ガイド

## 起動

- `index.html` をブラウザで直接開きます（サーバー不要）。

## 執筆

- 中央のエディタにそのまま入力します。入力内容は自動保存されます。

## 設定

- ツールバー左端の「メニュー」ボタンでサイドバーを開き、以下を調整できます。
  - テーマプリセット（ライト/ダーク/セピア）※ テーマセクションは折りたたみになっています
  - 背景色/文字色（カラーピッカー） ※ プリセット選択時に自動反映
  - フォントファミリー/サイズ/行間
  - タイプライターモード（有効化、アンカー比、張り付き強度）
  - スナップショット設定（自動保存間隔、差分文字数、保持数）
  - 執筆目標（目標文字数と任意の締切）
  - HUD設定（位置、表示時間、背景色・文字色、不透明度、テスト表示）

## ドキュメント操作

- 新規ドキュメント: 新しいドキュメントを作成して切り替えます（現在のドキュメントは保持されます）。
- 読み込み: 「ファイルを読み込む」で `.txt`/`.md` をインポートできます。
- エクスポート: `.txt` または `.md` でダウンロードできます。
- エクスポートファイル名には、現在のドキュメント名が含まれます（例: `MyNovel_20250925_132233.txt`）。
- 印刷: 「印刷」ボタンで印刷ダイアログを開きます（画面UIは非表示になり、本文のみが印刷レイアウトで表示されます）。

### 複数ドキュメント管理

- サイドバー「ドキュメント」のドロップダウンから、作成済みのドキュメントを選択できます。
- 「作成」で新規ドキュメントを追加、「改名」で現在ドキュメントの名前を変更、「削除」で現在ドキュメントを削除します。
- ドキュメントを切り替えると、エディタの内容がそのドキュメントに切り替わります。
- 入力した内容は各ドキュメント単位で自動保存され、再読み込み後も保持されます。
- ドキュメント一覧は、最終更新日時の新しい順で並びます。
- 現在のドキュメント名はブラウザのタブタイトルに反映されます（例: `MyNovel - Zen Writer`）。
- 未保存の変更がある状態で「新規ドキュメント」または別ドキュメントへの切り替えを行うと確認ダイアログが表示され、続行を選ぶと現在の内容はバックアップ用スナップショットとして自動退避されます（バックアップパネルから復元可能です）。

## ショートカット

- 保存: `Ctrl + S` / `Cmd + S`
- インデント: `Tab`
- フォントサイズ拡大: `Ctrl/Cmd + +` または `Ctrl/Cmd + =`
- フォントサイズ縮小: `Ctrl/Cmd + -`
- フォントサイズ初期化: `Ctrl/Cmd + 0`
- ツールバーの表示/非表示: `Alt + W`
- 太字: `Ctrl/Cmd + B`
- 斜体: `Ctrl/Cmd + I`
- リンク: `Ctrl/Cmd + K`

## 表示モード（UIモード）

- ツールバー右側の「表示モード」セレクトボックスから、次のモードを切り替えられます。
  - 通常モード: サイドバー/ツールバーを含む標準レイアウト。
  - フォーカスモード: サイドバーなど一部UIを抑えて、本文への集中を高めます。
  - ブランクモード: ほぼ本文のみのミニマルな画面構成になります（必要に応じて通常モードに戻してください）。

## フローティングツール（フォント調整）

- 右下の「ツール」ボタン（歯車アイコン）で小さなパネルを開閉できます。
- スライダーまたは数値入力でページ全体のフォントサイズを変更できます。

## ミニHUD（小型表示）

- 入力中に左下へ小さなHUDで「文字数/語数」をフェード表示します。
- 一時的な情報表示のため、数秒で自動的にフェードアウトします。

## 執筆目標と進捗バー

- サイドバーの「執筆目標」で、目標文字数と（必要なら）締切日を設定できます。
- ツールバー中央付近に目標の進捗バーが表示され、入力文字数に応じて幅が増加します。
- 目標を 0（未設定）に戻すと進捗バーは非表示になります。
- モバイル幅（768px以下）では進捗バーは自動で非表示になります。
- 目標達成時は右下に通知が一度だけ表示されます（HUDも短時間表示）。

### HUD 設定

- サイドバー「HUD 設定」から次を変更できます。
  - 表示位置: 左下/右下/左上/右上
  - 表示時間（ms）: 300〜5000 の範囲
  - 背景色/文字色
  - 不透明度: 0〜1（0.05単位）
- 「HUDテスト表示」で現在の設定でHUDを一時表示できます（動作確認用）。

## バックアップ（スナップショット）

- サイドバー「バックアップ」で本文のスナップショットを保存/復元/削除できます。
- 「今すぐ保存」ボタンで手動保存。
- 入力中は一定時間（設定可能、初期2分）かつ一定文字数（設定可能、初期300文字）以上の変化があると自動保存されます。
- 保持するスナップショット数も設定可能です（初期値: 無制限）。
- ファイル管理セクションの「最後のスナップショットから復元」ボタンから、直近のスナップショットで本文を復元できます。この操作では現在の内容も別スナップショットとして退避されるため、復元後も履歴として戻すことができます。

## 高度なテーマプリセット（テーマバンドル）

- サイドバー「テーマプリセット（拡張）」で、現在の設定（テーマ/フォント/サイズ/行間/カスタム色）を名前を付けて保存できます。
- 保存したプリセットはプルダウンから選んで「適用」で反映、「削除」で削除できます。

## アウトライン（部/章/節 など）

- サイドバー「アウトライン」でプリセットを切替/作成できます。
- 「新しいプリセットを作成」で、カンマ区切りのレベル名（例: `部,章,節`）を登録できます。
- 各レベルの色を変更すると、挿入ボタンの表示にも反映されます。
- 挿入ボタンで、カーソル位置にそのレベルの見出しテンプレート（Markdown見出し）を挿入します。
- レベル行の「↑/↓」ボタンで順序を入れ替えできます（保存されます）。

## Visual Profile（見た目のプリセット）

- テーマ/背景色/フォント/余白/表示モードといった「見た目」の設定を、「Visual Profile」としてまとめて扱います。
- 現時点では Phase A/B が実装済みで、組み込み/ユーザー定義プロファイルの保存・適用が可能です。
- 今後も「執筆モードのプリセット」を切り替える感覚で一括変更できるよう、細かな拡張を継続する予定です（仕様メモは `docs/VISUAL_PROFILE.md` を参照）。

## ヘルプ機能

- サイドバーの「アシスト」タブ内に「ヘルプ」ガジェットがあります。
- カテゴリボタンをクリックすると、その内容がサイドバー内にシームレスに表示されます。
- 外部ページへ遷移せずに操作方法を確認できます。
- ヘルプカテゴリ:
  - **はじめに**: 基本操作とショートカット
  - **エディタ機能**: 編集、検索、フォント装飾、タイプライターモード
  - **ドキュメント管理**: 複数ドキュメント、ファイル操作、バックアップ、スナップショット設定
  - **物語Wiki**: 設定管理、AI自動生成、ツリーペイン、コルクボード
  - **ガジェット設定**: ロードアウト、タブ管理、ツリーペイン
  - **表示モード**: 通常/フォーカス/ブランク、ツリーペイン
  - **テーマ・外観**: テーマ切替、カスタムカラー、背景ビジュアル
  - **キーボード操作**: ショートカット一覧、Markdownショートカット
  - **Markdown編集**: ライブプレビュー、リスト自動継続、見出し・リンク挿入

## UI設定

- サイドバーの「UI Settings」ガジェットで以下を調整できます。
  - **タブ表示方式**: buttons/tabs/dropdown/accordion から選択
  - **ボタン表示**: アイコン+テキスト/アイコンのみ/テキストのみ
  - **サイドバー幅**: 220px〜560px の範囲で調整
  - **タブ管理**: 新しいタブの追加、名称変更、削除
  - **フォントサイズ**: 見出し/本文のサイズ調整
  - **エディタプレースホルダ**: 初期表示テキストのカスタマイズ

## 既知の制約

- ブラウザ/端末間の同期はありません。
- 長大なテキストはブラウザのメモリ/LocalStorage制限の影響を受けます。

## トラブルシュート

- 自動保存が効かない: プライベートブラウズやストレージ制限を確認してください。
- ダウンロードされない: ブラウザのポップアップ/ダウンロード設定をご確認ください。
