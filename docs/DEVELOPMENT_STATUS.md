# プロジェクト開発項目表

## コア設計思想

### ガジェットベースアーキテクチャ

Zen Writerは「メモ帳以上の機能はすべてガジェット化」という原則に基づいています。

#### 主要コンセプト

1. **完全モジュラー設計**
   - すべての追加機能はガジェットとして実装
   - ガジェットは独立した単位で開発・テスト可能
   - `ZWGadgets.register(name, factory, options)` で登録

2. **動的タブシステム**
   - タブは基本1つから開始
   - ユーザーが自由にタブを追加・削除可能
   - 各タブに任意のガジェットを配置可能

3. **プリセット（ロードアウト）システム**
   - 初心者向けに推奨構成を提供（`novel-standard`, `screenplay`, `minimal`）
   - ユーザーが独自のプリセットを作成・保存可能
   - ワンクリックで構成を切り替え

4. **フレキシブルレイアウト**（計画中）
   - タブを上下左右に配置可能
   - サイドバーから切り離してフローティング表示
   - 透明度調整、表示/非表示トグル
   - セーブボタン、フォント装飾などを想定

#### 現在の実装状況

- ✅ ガジェット登録・レンダリングシステム
- ✅ ロードアウトの保存・適用機能
- ✅ 動的タブ追加・削除のAPI（`sidebarManager.addTab/removeTab`）
- ⚠️ タブへのガジェット動的割り当て（部分実装）
- ❌ フローティングパネル機能（未実装）
- ❌ 柔軟な配置システム（未実装）

## 直近の開発項目 (v0.3.16 実装済み)

| カテゴリ | 項目 | 詳細 | ステータス |
|----------|------|------|------------|
| UI将来強化 | OpenSpec `ui-future-enhancements` 実装 | タイプライター精度向上、Markdown最小プレビュー・ショートカット・リスト継続、プレビュー内リンクナビ | ✅ 完了 |
| 設定UI | エディタタブ追加 | タイプライターモードとスナップショット設定を追加 | ✅ 完了 |
| タイプライターモード | ミラーDOM計測 | 精度向上、設定UIで有効化/アンカー/張り付き調整 | ✅ 完了 |
| Markdown機能 | ショートカット・リスト継続 | Ctrl/Cmd+B/I/Kショートカット、Enterでのリスト自動継続 | ✅ 完了 |
| 最小ライブプレビュー | 見出し/強調/リスト/リンク | Markdown要素のリアルタイムプレビュー | ✅ 完了 |
| スナップショット | 設定UI調整 | 間隔/差分/保持数調整、retention実装 | ✅ 完了 |
| E2Eテスト | editor-settings.spec.js | 設定永続化検証 | ✅ 完了 |
| ツリーペイン | 最小実装 | ドキュメント/ガジェットツリー表示、展開/折りたたみ、クリックナビ、設定保存 | ✅ 完了 |
| Corkboard | 最小実装 | テキストカード追加・ドラッグ並び替え、Enterキー新規カード作成 | ✅ 完了 |
| Markdown拡張 | コードブロック・目次 | 簡易表示、リンク生成・スクロール同期トグル | ✅ 完了 |
| Images Interactive | プリセット・コントロール | VN肖像/背景/挿絵/テキストボックス用プリセット、不透明度・フィルター数値コントロール | ✅ 完了 |
| Images Interactive | スナップショット | 画像状態の保存・復元機能 | ✅ 完了 |
| Content Linking | モデル・ナビゲーション | doc://, asset://, http(s)://リンクサポート、クリックナビとホバー・プレビュー | ✅ 完了 |
| Panels Layout | Docking/splitモデル | ゾーン・永続化、キーボードナビゲーションとアクセシビリティ | ✅ 完了 |

## 今後の開発予定項目

| カテゴリ | 項目 | 詳細 | 優先度 |
|----------|------|------|--------|
| OpenSpec仕様 | Draft capability deltas | この変更のcapability deltasをドラフト | 高 |
| OpenSpec仕様 | Validate with strict mode | strict modeでの検証 | 高 |
| テーマ・背景 | Dark mode palette expansion | ダークモードパレット拡張 | 低 |
| テーマ・背景 | Background visuals | スクロール連動・ランダム化の背景ビジュアル | 低 |
| QA・ドキュメント | E2E & smoke updates | E2Eとsmokeテストの更新 | 中 |
| QA・ドキュメント | USAGE/CHANGELOG updates | USAGEとCHANGELOGの更新 | 中 |
| UI/UX改善 | 左サイドバー展開時のメインエリア隠れ修正 | パネルレイアウト調整 | 中 |
| UI/UX改善 | カラーパレットの現在の色反映機能 | 実装 | 中 |
| UI/UX改善 | エディタキー移動時のガクガク振動修正 | スクロール挙動改善 | 中 |
| UI/UX改善 | 折り返し文字数指定機能 | 追加 | 中 |
| UI/UX改善 | 文字数表示スタンプ機能 | 区切り・段落集計の実装 | 中 |
| UI/UX改善 | 編集ファイル/章の表示・一覧機能 | UX向上 | 中 |
| UI/UX改善 | 破棄確認・復元機能強化 | 変更追跡 | 中 |
| パフォーマンス最適化 | updateWordCount デバウンス | 長文での文字数更新頻度低減 | 高 |
| パフォーマンス最適化 | typewriter scroll requestAnimationFrame | caret移動時のスクロール計算スムーズ化 | 高 |
| パフォーマンス最適化 | live preview 差分適用 | markdown変換のリアルタイム性向上 | 高 |
| パフォーマンス最適化 | selection range measurement | 文字数スタンプの位置計算負荷削減 | 中 |

## プロジェクト・マイルストーン

- **v0.3.17 (2025-11-06)**: サイドバーアニメーションとUI安定化の修正完了
- **次期リリース予定**: OpenSpec仕様の完了とUI/UX改善項目の実装
